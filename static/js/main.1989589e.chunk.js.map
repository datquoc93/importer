{"version":3,"sources":["_helpers/auth-header.js","_helpers/history.js","_constants/alert.constants.js","_constants/user.constants.js","_reducers/authentication.reducer.js","_reducers/index.js","_reducers/users.reducer.js","_reducers/alert.reducer.js","_helpers/store.js","_actions/alert.actions.js","_services/user.service.js","_actions/user.actions.js","_components/PrivateRoute.jsx","HomePage.jsx","LoginPage.jsx","App.js","_helpers/fake-backend.js","index.js"],"names":["authHeader","user","JSON","parse","localStorage","getItem","token","history","createBrowserHistory","alertConstants","SUCCESS","ERROR","CLEAR","userConstants","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","intialState","loggedIn","rootReducer","combineReducers","authentication","state","action","type","users","loading","items","error","alert","message","loggerMiddleware","createLogger","store","createStore","applyMiddleware","thunkMiddleware","alertActions","success","clear","userService","login","userName","passWd","requestOptions","method","headers","body","stringify","fetch","then","console","log","setItem","logout","getAll","handleResponse","removeItem","response","text","data","ok","status","window","location","reload","statusText","Promise","reject","userActions","dispatch","push","failure","PrivateRoute","Component","component","rest","render","props","to","pathname","from","HomePage","this","className","firstName","map","index","key","id","lastName","React","connectedHomePage","connect","LoginPage","username","password","submitted","handleChange","bind","handleSubmit","e","target","name","value","setState","preventDefault","loggingIn","onSubmit","htmlFor","onChange","alt","src","connectedLoginPage","App","listen","exact","path","connectedApp","realFetch","url","opts","resolve","setTimeout","endsWith","params","filteredUsers","filter","length","responseJson","Authorization","configureFakeBackend","document","getElementById"],"mappings":"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","file":"static/js/main.1989589e.chunk.js","sourcesContent":["export function authHeader(){\r\n    //return authorization header with jwt\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n    if(user && user.token) {\r\n        return { 'Authorization' : 'Bearer' + user.token };\r\n    } else {\r\n        return {};\r\n    }\r\n}","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();","export const alertConstants = {\r\n    SUCCESS: 'ALERT_SUCCESS',\r\n    ERROR: 'ALERT_ERROR',\r\n    CLEAR: 'ALERT_CLEAR',\r\n};","export const userConstants = {\r\n    LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\r\n    LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',\r\n    LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',\r\n\r\n    LOGOUT: 'USER_LOGOUT',\r\n\r\n    GETALL_REQUEST: 'USERS_GETALL_REQUEST',\r\n    GETALL_SUCCESS: 'USERS_GETALL_SUCCESS',\r\n    GETALL_FAILURE: 'USERS_GETALL_FAILURE', \r\n};","import { userConstants } from '../_constants';\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst intialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport function authentication(state = intialState, action) {\r\n    switch (action.type) {\r\n        case userConstants.LOGIN_REQUEST:\r\n            return {\r\n                loggedIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_SUCCESS:\r\n            return {\r\n                loggedIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_FAILURE:\r\n            return {};\r\n        case userConstants.LOGOUT:\r\n            return {};\r\n        default: \r\n            return state;\r\n    }\r\n}","import {combineReducers} from 'redux';\r\nimport { authentication } from './authentication.reducer';\r\nimport {users} from './users.reducer';\r\nimport {alert} from './alert.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    authentication,\r\n    users,\r\n    alert\r\n});\r\n\r\nexport default rootReducer;","import {userConstants} from '../_constants';\r\n\r\nexport function users(state = {}, action) {\r\n    switch (action.type) {\r\n        case userConstants.GETALL_REQUEST:\r\n            return{\r\n                loading: true\r\n            };\r\n        case userConstants.GETALL_SUCCESS:\r\n            return{\r\n                items: action.users\r\n            };\r\n        case userConstants.GETALL_FAILURE:\r\n            return{\r\n                error: action.error\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import {alertConstants} from '../_constants';\r\n\r\nexport function alert(state = {}, action){\r\n    switch(action.type){\r\n        case alertConstants.SUCCESS: \r\n            return {\r\n                type: 'alert-success',\r\n                message: action.message\r\n            };\r\n        case alertConstants.ERROR:\r\n            return {\r\n                type: 'alert-danger',\r\n                message: action.message\r\n            };\r\n        case alertConstants.CLEAR:\r\n            return {};\r\n        default:\r\n            return state;\r\n    }\r\n}","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {createLogger} from 'redux-logger';\r\nimport rootReducer  from '../_reducers';\r\n\r\nconst loggerMiddleware = createLogger();\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    applyMiddleware(\r\n        thunkMiddleware,\r\n        loggerMiddleware\r\n    )\r\n);","import { alertConstants } from '../_constants';\r\n\r\nexport const alertActions = {\r\n    success,\r\n    error,\r\n    clear,\r\n}\r\n\r\nfunction success(message){\r\n    return {type: alertConstants.SUCCESS, message};\r\n}\r\n\r\nfunction error(message){\r\n    return {type: alertConstants.ERROR, message};\r\n}\r\n\r\nfunction clear(message){\r\n    return {type: alertConstants.CLEAR};\r\n}"," import {authHeader} from '../_helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    getAll\r\n};\r\n\r\nfunction login(userName, passWd){\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({userName, passWd})\r\n    };\r\n\r\n    return fetch('/users/authenticate', requestOptions)\r\n        .then(console.log('user'))\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout(){\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll(){\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n    return fetch('/users', requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response){\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if(!response.ok) {\r\n            if(response.status === 401) {\r\n                logout();\r\n                window.location.reload(true);\r\n            }\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    });\r\n}","import { userConstants } from '../_constants';\r\nimport {alertActions} from './alert.actions';\r\nimport {userService} from '../_services';\r\nimport {history} from '../_helpers';\r\n\r\n\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    getAll,\r\n}\r\n\r\nfunction login(userName, passWd){\r\n    return dispatch => {\r\n        dispatch(request({userName}));\r\n        // Call Service login\r\n        userService.login(userName, passWd)\r\n        .then(\r\n            user => {\r\n                dispatch(success(user));\r\n                history.push('/');\r\n            },\r\n            error => {\r\n                dispatch(failure(error));\r\n                dispatch(alertActions.error(error));\r\n            }\r\n        )\r\n    }\r\n    function request(user) {\r\n        return {type: userConstants.LOGIN_REQUEST, user}\r\n    }\r\n    function success(user) {\r\n        return {type: userConstants.LOGIN_SUCCESS, user}\r\n    }\r\n    function failure(error) {\r\n        return {type: userConstants.LOGIN_FAILURE, error}\r\n    }\r\n}\r\n\r\nfunction logout(){\r\n    // call service logout\r\n    userService.logout();\r\n    return {type: userConstants.LOGOUT};\r\n}\r\n\r\nfunction getAll(){\r\n\r\n    return dispatch => {\r\n        dispatch(request());\r\n        //call service getAll\r\n        userService.getAll()\r\n        .then(\r\n            users => dispatch(success(users)),\r\n            error => {\r\n                dispatch(failure(error));\r\n                dispatch(alertActions.error(error))\r\n            }\r\n        );\r\n    };\r\n    \r\n    function request() {\r\n        return {type: userConstants.GETALL_REQUEST}\r\n    }\r\n    function success(user) {\r\n        return {type: userConstants.GETALL_SUCCESS, user}\r\n    }\r\n    function failure(error) {\r\n        return {type: userConstants.GETALL_FAILURE, error}\r\n    }\r\n}","import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({component: Component, ...rest}) => (\r\n    <Route {...rest} render={props => (\r\n                localStorage.getItem('user') \r\n                ? <Component {...props} /> \r\n                : <Redirect to={{ pathname: '/login', state: {from: props.location}}} />\r\n            )\r\n        }    \r\n    />\r\n)","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { userActions } from './_actions';\r\n\r\nclass HomePage extends React.Component {\r\n    componentDidMount() {\r\n        this.props.dispatch(userActions.getAll());\r\n    }\r\n\r\n    render() {\r\n        const { user, users } = this.props;\r\n        return (\r\n            <div className=\"col-md-6 col-md-offset-3\">\r\n                <h1>Hi {user.firstName}!</h1>\r\n                <p>You're logged in with React and JWT!!</p>\r\n                <h3>Users from secure api end point:</h3>\r\n                {users.loading && <em>Loading users...</em>}\r\n                {users.error && <span className=\"text-danger\">ERROR: {users.error}</span>}\r\n                {users.items &&\r\n                    <ul>\r\n                        {users.items.map((user, index) =>\r\n                            <li key={user.id}>\r\n                                {user.firstName + ' ' + user.lastName}\r\n                            </li>\r\n                        )}\r\n                    </ul>\r\n                }\r\n                <p>\r\n                    <Link to=\"/login\">Logout</Link>\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { users, authentication } = state;\r\n    const { user } = authentication;\r\n    return {\r\n        user,\r\n        users\r\n    };\r\n}\r\n\r\nconst connectedHomePage = connect(mapStateToProps)(HomePage);\r\nexport { connectedHomePage as HomePage };","import React from 'react'; \r\nimport { connect } from 'react-redux';\r\n\r\nimport { userActions } from './_actions';\r\n\r\nclass LoginPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // reset login status\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({ submitted: true });\r\n        const { username, password } = this.state;\r\n        const { dispatch } = this.props;\r\n        if (username && password) {\r\n            dispatch(userActions.login(username, password));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { loggingIn } = this.props;\r\n        const { username, password, submitted } = this.state;\r\n        return (\r\n            <div className=\"col-md-6 col-md-offset-3\">\r\n                <h2>Login</h2>\r\n                <form name=\"form\" onSubmit={this.handleSubmit}>\r\n                    <div className={'form-group' + (submitted && !username ? ' has-error' : '')}>\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"username\" value={username} onChange={this.handleChange} />\r\n                        {submitted && !username &&\r\n                            <div className=\"help-block\">Username is required</div>\r\n                        }\r\n                    </div>\r\n                    <div className={'form-group' + (submitted && !password ? ' has-error' : '')}>\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password\" value={password} onChange={this.handleChange} />\r\n                        {submitted && !password &&\r\n                            <div className=\"help-block\">Password is required</div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <button className=\"btn btn-primary\">Login</button>\r\n                        {loggingIn &&\r\n                            <img alt=\"img\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n                        }\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { loggingIn } = state.authentication;\r\n    return {\r\n        loggingIn\r\n    };\r\n}\r\n\r\nconst connectedLoginPage = connect(mapStateToProps)(LoginPage);\r\nexport { connectedLoginPage as LoginPage }; ","import React from 'react'; \nimport {Router, Route} from 'react-router-dom';\nimport {connect} from 'react-redux';\n// import './App.css';\n\nimport {history} from './_helpers';\nimport {alertActions} from './_actions';\nimport {PrivateRoute} from './_components';\nimport {HomePage} from './HomePage';\nimport {LoginPage} from './LoginPage';\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const {dispatch} = this.props;\n    history.listen((location, action) => {\n      dispatch(alertActions.clear());\n    });\n  }\n\n  render() {\n    const { alert } = this.props;\n    return (\n      <div className=\"jumbotron\">\n        <div className=\"container\">\n          <div className=\"col-sm-8 col-sm-offset-2\">\n            {alert.message && <div className={`alert ${alert.type}`}>{alert.message}</div>}\n            <Router history={history}>\n              <div>\n                <PrivateRoute exact path=\"/\" component={HomePage} />\n                <Route path=\"/login\" component={LoginPage} />\n              </div>\n            </Router>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  const { alert } = state;\n  return {\n      alert\n  };\n}\n\nconst connectedApp = connect(mapStateToProps)(App);\nexport { connectedApp as App };\n","export function configureFakeBackend() {\r\n    let users = [{ id: 1, username: 'test', password: 'test', firstName: 'Test', lastName: 'User' }];\r\n    let realFetch = window.fetch;\r\n    window.fetch = function (url, opts) {\r\n        return new Promise((resolve, reject) => {\r\n            // wrap in timeout to simulate server api call\r\n            setTimeout(() => {\r\n\r\n                // authenticate\r\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\r\n                    // get parameters from post request\r\n                    let params = JSON.parse(opts.body);\r\n\r\n                    // find if any user matches login credentials\r\n                    let filteredUsers = users.filter(user => {\r\n                        return user.username === params.username && user.password === params.password;\r\n                    });\r\n\r\n                    if (filteredUsers.length) {\r\n                        // if login details are valid return user details and fake jwt token\r\n                        let user = filteredUsers[0];\r\n                        let responseJson = {\r\n                            id: user.id,\r\n                            username: user.username,\r\n                            firstName: user.firstName,\r\n                            lastName: user.lastName,\r\n                            token: 'fake-jwt-token'\r\n                        };\r\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\r\n                    } else {\r\n                        // else return error\r\n                        reject('Username or password is incorrect');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                // get users\r\n                if (url.endsWith('/users') && opts.method === 'GET') {\r\n                    // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\r\n                    if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\r\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users))});\r\n                    } else {\r\n                        // return 401 not authorised if token is null or invalid\r\n                        reject('Unauthorised');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                // pass through any requests not handled above\r\n                realFetch(url, opts).then(response => resolve(response));\r\n\r\n            }, 500);\r\n        });\r\n    }\r\n}","import React from 'react'; \nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport {App} from './App'; \n\nimport { configureFakeBackend, store } from './_helpers';\n\nconfigureFakeBackend();\n\nrender(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}